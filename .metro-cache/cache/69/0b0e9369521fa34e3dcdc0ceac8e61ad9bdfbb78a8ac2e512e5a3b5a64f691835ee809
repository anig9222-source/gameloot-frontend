{"dependencies":[{"name":"@react-native-async-storage/async-storage","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":8,"column":0,"index":167},"end":{"line":8,"column":69,"index":236}}],"key":"0kSRlooyBOaYM9tlTtK91nq+uds=","exportNames":["*"],"imports":1}},{"name":"../services/admobService","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":9,"column":0,"index":237},"end":{"line":9,"column":56,"index":293}}],"key":"lPl1HfkJ5ve7mTmlk/pTMX/Vd/k=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  function _interopDefault(e) {\n    return e && e.__esModule ? e : {\n      default: e\n    };\n  }\n  Object.defineProperty(exports, \"interstitialAdManager\", {\n    enumerable: true,\n    get: function () {\n      return interstitialAdManager;\n    }\n  });\n  var _reactNativeAsyncStorageAsyncStorage = require(_dependencyMap[0], \"@react-native-async-storage/async-storage\");\n  var AsyncStorage = _interopDefault(_reactNativeAsyncStorageAsyncStorage);\n  var _servicesAdmobService = require(_dependencyMap[1], \"../services/admobService\");\n  /**\n   * Interstitial Ad Manager\n   * \n   * Tracks screen views and shows interstitial ads every 5 screens\n   * Compliant with Google AdMob policies (not too aggressive)\n   */\n\n  const SCREEN_COUNT_KEY = '@interstitial_screen_count';\n  const SCREENS_BEFORE_AD = 5; // Show ad every 5 screens\n\n  class InterstitialAdManager {\n    screenCount = 0;\n    isInitialized = false;\n\n    /**\n     * Initialize manager - load saved screen count\n     */\n    async initialize() {\n      if (this.isInitialized) return;\n      try {\n        const savedCount = await AsyncStorage.default.getItem(SCREEN_COUNT_KEY);\n        this.screenCount = savedCount ? parseInt(savedCount, 10) : 0;\n        this.isInitialized = true;\n        console.log('[InterstitialManager] Initialized with count:', this.screenCount);\n      } catch (error) {\n        console.error('[InterstitialManager] Failed to load count:', error);\n        this.screenCount = 0;\n        this.isInitialized = true;\n      }\n    }\n\n    /**\n     * Track a screen view\n     * Call this in useEffect of each screen\n     */\n    async trackScreenView() {\n      if (!this.isInitialized) {\n        await this.initialize();\n      }\n      this.screenCount++;\n      console.log('[InterstitialManager] Screen count:', this.screenCount);\n\n      // Save count\n      try {\n        await AsyncStorage.default.setItem(SCREEN_COUNT_KEY, this.screenCount.toString());\n      } catch (error) {\n        console.error('[InterstitialManager] Failed to save count:', error);\n      }\n\n      // Show ad every 5 screens\n      if (this.screenCount >= SCREENS_BEFORE_AD) {\n        console.log('[InterstitialManager] Showing interstitial ad...');\n        this.screenCount = 0;\n        try {\n          await AsyncStorage.default.setItem(SCREEN_COUNT_KEY, '0');\n          await _servicesAdmobService.admobService.showInterstitialAd();\n        } catch (error) {\n          console.error('[InterstitialManager] Failed to show interstitial:', error);\n        }\n      }\n    }\n\n    /**\n     * Reset counter (for testing or special cases)\n     */\n    async resetCount() {\n      this.screenCount = 0;\n      try {\n        await AsyncStorage.default.setItem(SCREEN_COUNT_KEY, '0');\n        console.log('[InterstitialManager] Count reset');\n      } catch (error) {\n        console.error('[InterstitialManager] Failed to reset count:', error);\n      }\n    }\n\n    /**\n     * Get current count (for debugging)\n     */\n    getCurrentCount() {\n      return this.screenCount;\n    }\n  }\n\n  // Singleton instance\n  const interstitialAdManager = new InterstitialAdManager();\n});","lineCount":106,"map":[[12,2,91,0,"Object"],[12,8,91,0],[12,9,91,0,"defineProperty"],[12,23,91,0],[12,24,91,0,"exports"],[12,31,91,0],[13,4,91,0,"enumerable"],[13,14,91,0],[14,4,91,0,"get"],[14,7,91,0],[14,18,91,0,"get"],[14,19,91,0],[15,6,91,0],[15,13,91,0,"interstitialAdManager"],[15,34,91,0],[16,4,91,0],[17,2,91,0],[18,2,8,0],[18,6,8,0,"_reactNativeAsyncStorageAsyncStorage"],[18,42,8,0],[18,45,8,0,"require"],[18,52,8,0],[18,53,8,0,"_dependencyMap"],[18,67,8,0],[19,2,8,0],[19,6,8,0,"AsyncStorage"],[19,18,8,0],[19,21,8,0,"_interopDefault"],[19,36,8,0],[19,37,8,0,"_reactNativeAsyncStorageAsyncStorage"],[19,73,8,0],[20,2,9,0],[20,6,9,0,"_servicesAdmobService"],[20,27,9,0],[20,30,9,0,"require"],[20,37,9,0],[20,38,9,0,"_dependencyMap"],[20,52,9,0],[21,2,1,0],[22,0,2,0],[23,0,3,0],[24,0,4,0],[25,0,5,0],[26,0,6,0],[28,2,11,0],[28,8,11,6,"SCREEN_COUNT_KEY"],[28,24,11,22],[28,27,11,25],[28,55,11,53],[29,2,12,0],[29,8,12,6,"SCREENS_BEFORE_AD"],[29,25,12,23],[29,28,12,26],[29,29,12,27],[29,30,12,28],[29,31,12,29],[31,2,14,0],[31,8,14,6,"InterstitialAdManager"],[31,29,14,27],[31,30,14,28],[32,4,15,10,"screenCount"],[32,15,15,21],[32,18,15,32],[32,19,15,33],[33,4,16,10,"isInitialized"],[33,17,16,23],[33,20,16,35],[33,25,16,40],[35,4,18,2],[36,0,19,0],[37,0,20,0],[38,4,21,2],[38,10,21,8,"initialize"],[38,20,21,18,"initialize"],[38,21,21,18],[38,23,21,36],[39,6,22,4],[39,10,22,8],[39,14,22,12],[39,15,22,13,"isInitialized"],[39,28,22,26],[39,30,22,28],[40,6,24,4],[40,10,24,8],[41,8,25,6],[41,14,25,12,"savedCount"],[41,24,25,22],[41,27,25,25],[41,33,25,31,"AsyncStorage"],[41,45,25,43],[41,46,25,43,"default"],[41,53,25,43],[41,54,25,44,"getItem"],[41,61,25,51],[41,62,25,52,"SCREEN_COUNT_KEY"],[41,78,25,68],[41,79,25,69],[42,8,26,6],[42,12,26,10],[42,13,26,11,"screenCount"],[42,24,26,22],[42,27,26,25,"savedCount"],[42,37,26,35],[42,40,26,38,"parseInt"],[42,48,26,46],[42,49,26,47,"savedCount"],[42,59,26,57],[42,61,26,59],[42,63,26,61],[42,64,26,62],[42,67,26,65],[42,68,26,66],[43,8,27,6],[43,12,27,10],[43,13,27,11,"isInitialized"],[43,26,27,24],[43,29,27,27],[43,33,27,31],[44,8,28,6,"console"],[44,15,28,13],[44,16,28,14,"log"],[44,19,28,17],[44,20,28,18],[44,67,28,65],[44,69,28,67],[44,73,28,71],[44,74,28,72,"screenCount"],[44,85,28,83],[44,86,28,84],[45,6,29,4],[45,7,29,5],[45,8,29,6],[45,15,29,13,"error"],[45,20,29,18],[45,22,29,20],[46,8,30,6,"console"],[46,15,30,13],[46,16,30,14,"error"],[46,21,30,19],[46,22,30,20],[46,67,30,65],[46,69,30,67,"error"],[46,74,30,72],[46,75,30,73],[47,8,31,6],[47,12,31,10],[47,13,31,11,"screenCount"],[47,24,31,22],[47,27,31,25],[47,28,31,26],[48,8,32,6],[48,12,32,10],[48,13,32,11,"isInitialized"],[48,26,32,24],[48,29,32,27],[48,33,32,31],[49,6,33,4],[50,4,34,2],[52,4,36,2],[53,0,37,0],[54,0,38,0],[55,0,39,0],[56,4,40,2],[56,10,40,8,"trackScreenView"],[56,25,40,23,"trackScreenView"],[56,26,40,23],[56,28,40,41],[57,6,41,4],[57,10,41,8],[57,11,41,9],[57,15,41,13],[57,16,41,14,"isInitialized"],[57,29,41,27],[57,31,41,29],[58,8,42,6],[58,14,42,12],[58,18,42,16],[58,19,42,17,"initialize"],[58,29,42,27],[58,30,42,28],[58,31,42,29],[59,6,43,4],[60,6,45,4],[60,10,45,8],[60,11,45,9,"screenCount"],[60,22,45,20],[60,24,45,22],[61,6,46,4,"console"],[61,13,46,11],[61,14,46,12,"log"],[61,17,46,15],[61,18,46,16],[61,55,46,53],[61,57,46,55],[61,61,46,59],[61,62,46,60,"screenCount"],[61,73,46,71],[61,74,46,72],[63,6,48,4],[64,6,49,4],[64,10,49,8],[65,8,50,6],[65,14,50,12,"AsyncStorage"],[65,26,50,24],[65,27,50,24,"default"],[65,34,50,24],[65,35,50,25,"setItem"],[65,42,50,32],[65,43,50,33,"SCREEN_COUNT_KEY"],[65,59,50,49],[65,61,50,51],[65,65,50,55],[65,66,50,56,"screenCount"],[65,77,50,67],[65,78,50,68,"toString"],[65,86,50,76],[65,87,50,77],[65,88,50,78],[65,89,50,79],[66,6,51,4],[66,7,51,5],[66,8,51,6],[66,15,51,13,"error"],[66,20,51,18],[66,22,51,20],[67,8,52,6,"console"],[67,15,52,13],[67,16,52,14,"error"],[67,21,52,19],[67,22,52,20],[67,67,52,65],[67,69,52,67,"error"],[67,74,52,72],[67,75,52,73],[68,6,53,4],[70,6,55,4],[71,6,56,4],[71,10,56,8],[71,14,56,12],[71,15,56,13,"screenCount"],[71,26,56,24],[71,30,56,28,"SCREENS_BEFORE_AD"],[71,47,56,45],[71,49,56,47],[72,8,57,6,"console"],[72,15,57,13],[72,16,57,14,"log"],[72,19,57,17],[72,20,57,18],[72,70,57,68],[72,71,57,69],[73,8,58,6],[73,12,58,10],[73,13,58,11,"screenCount"],[73,24,58,22],[73,27,58,25],[73,28,58,26],[74,8,60,6],[74,12,60,10],[75,10,61,8],[75,16,61,14,"AsyncStorage"],[75,28,61,26],[75,29,61,26,"default"],[75,36,61,26],[75,37,61,27,"setItem"],[75,44,61,34],[75,45,61,35,"SCREEN_COUNT_KEY"],[75,61,61,51],[75,63,61,53],[75,66,61,56],[75,67,61,57],[76,10,62,8],[76,16,62,14,"admobService"],[76,37,62,26],[76,38,62,26,"admobService"],[76,50,62,26],[76,51,62,27,"showInterstitialAd"],[76,69,62,45],[76,70,62,46],[76,71,62,47],[77,8,63,6],[77,9,63,7],[77,10,63,8],[77,17,63,15,"error"],[77,22,63,20],[77,24,63,22],[78,10,64,8,"console"],[78,17,64,15],[78,18,64,16,"error"],[78,23,64,21],[78,24,64,22],[78,76,64,74],[78,78,64,76,"error"],[78,83,64,81],[78,84,64,82],[79,8,65,6],[80,6,66,4],[81,4,67,2],[83,4,69,2],[84,0,70,0],[85,0,71,0],[86,4,72,2],[86,10,72,8,"resetCount"],[86,20,72,18,"resetCount"],[86,21,72,18],[86,23,72,36],[87,6,73,4],[87,10,73,8],[87,11,73,9,"screenCount"],[87,22,73,20],[87,25,73,23],[87,26,73,24],[88,6,74,4],[88,10,74,8],[89,8,75,6],[89,14,75,12,"AsyncStorage"],[89,26,75,24],[89,27,75,24,"default"],[89,34,75,24],[89,35,75,25,"setItem"],[89,42,75,32],[89,43,75,33,"SCREEN_COUNT_KEY"],[89,59,75,49],[89,61,75,51],[89,64,75,54],[89,65,75,55],[90,8,76,6,"console"],[90,15,76,13],[90,16,76,14,"log"],[90,19,76,17],[90,20,76,18],[90,55,76,53],[90,56,76,54],[91,6,77,4],[91,7,77,5],[91,8,77,6],[91,15,77,13,"error"],[91,20,77,18],[91,22,77,20],[92,8,78,6,"console"],[92,15,78,13],[92,16,78,14,"error"],[92,21,78,19],[92,22,78,20],[92,68,78,66],[92,70,78,68,"error"],[92,75,78,73],[92,76,78,74],[93,6,79,4],[94,4,80,2],[96,4,82,2],[97,0,83,0],[98,0,84,0],[99,4,85,2,"getCurrentCount"],[99,19,85,17,"getCurrentCount"],[99,20,85,17],[99,22,85,28],[100,6,86,4],[100,13,86,11],[100,17,86,15],[100,18,86,16,"screenCount"],[100,29,86,27],[101,4,87,2],[102,2,88,0],[104,2,90,0],[105,2,91,7],[105,8,91,13,"interstitialAdManager"],[105,29,91,34],[105,32,91,37],[105,36,91,41,"InterstitialAdManager"],[105,57,91,62],[105,58,91,63],[105,59,91,64],[106,0,91,65],[106,3]],"functionMap":{"names":["<global>","InterstitialAdManager","InterstitialAdManager#initialize","InterstitialAdManager#trackScreenView","InterstitialAdManager#resetCount","InterstitialAdManager#getCurrentCount"],"mappings":"AAA;ACa;ECO;GDa;EEM;GF2B;EGK;GHQ;EIK;GJE;CDC"},"hasCjsExports":false},"type":"js/module"}]}