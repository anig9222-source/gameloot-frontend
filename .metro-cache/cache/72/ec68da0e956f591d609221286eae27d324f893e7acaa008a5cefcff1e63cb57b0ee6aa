{"dependencies":[{"name":"expo/virtual/env","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"dgHc21cgR+buKc7O3/dChhD5JJk=","exportNames":["*"],"imports":1}},{"name":"react","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":89,"index":89}}],"key":"RtGiGa+/H7VrI7GDQDLhO1UbpU8=","exportNames":["*"],"imports":1}},{"name":"@react-native-async-storage/async-storage","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":2,"column":0,"index":90},"end":{"line":2,"column":69,"index":159}}],"key":"0kSRlooyBOaYM9tlTtK91nq+uds=","exportNames":["*"],"imports":1}},{"name":"axios","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":3,"column":0,"index":160},"end":{"line":3,"column":26,"index":186}}],"key":"e45rENb5cSu0Yeh6oC1uWb7lEp4=","exportNames":["*"],"imports":1}},{"name":"react/jsx-dev-runtime","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"L9D70Z4hi4aGuui1ysja/oQ5ytI=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  var _jsxFileName = \"/app/frontend/contexts/AuthContext.tsx\",\n    _s = $RefreshSig$(),\n    _s2 = $RefreshSig$();\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  function _interopDefault(e) {\n    return e && e.__esModule ? e : {\n      default: e\n    };\n  }\n  Object.defineProperty(exports, \"AuthProvider\", {\n    enumerable: true,\n    get: function () {\n      return AuthProvider;\n    }\n  });\n  Object.defineProperty(exports, \"useAuth\", {\n    enumerable: true,\n    get: function () {\n      return useAuth;\n    }\n  });\n  var _expoVirtualEnv = require(_dependencyMap[0], \"expo/virtual/env\");\n  var _react = require(_dependencyMap[1], \"react\");\n  var _reactNativeAsyncStorageAsyncStorage = require(_dependencyMap[2], \"@react-native-async-storage/async-storage\");\n  var AsyncStorage = _interopDefault(_reactNativeAsyncStorageAsyncStorage);\n  var _axios = require(_dependencyMap[3], \"axios\");\n  var axios = _interopDefault(_axios);\n  var _reactJsxDevRuntime = require(_dependencyMap[4], \"react/jsx-dev-runtime\");\n  const AuthContext = /*#__PURE__*/(0, _react.createContext)(undefined);\n  const AuthProvider = ({\n    children\n  }) => {\n    _s();\n    const [user, setUser] = (0, _react.useState)(null);\n    const [token, setToken] = (0, _react.useState)(null);\n    const [loading, setLoading] = (0, _react.useState)(true);\n    (0, _react.useEffect)(() => {\n      loadStoredAuth();\n    }, []);\n    const loadStoredAuth = async () => {\n      try {\n        const storedToken = await AsyncStorage.default.getItem('token');\n        const storedUser = await AsyncStorage.default.getItem('user');\n        if (storedToken && storedUser) {\n          setToken(storedToken);\n          setUser(JSON.parse(storedUser));\n        }\n      } catch (error) {\n        console.error('Error loading auth:', error);\n      } finally {\n        setLoading(false);\n      }\n    };\n    const login = async (email, password) => {\n      const API_URL = _expoVirtualEnv.env.EXPO_PUBLIC_BACKEND_URL;\n      const response = await axios.default.post(`${API_URL}/api/auth/login`, {\n        email,\n        password\n      });\n      const {\n        access_token,\n        user: userData\n      } = response.data;\n\n      // Update state FIRST (synchronous)\n      setToken(access_token);\n      setUser(userData);\n\n      // Then persist to AsyncStorage (fire and forget)\n      AsyncStorage.default.setItem('token', access_token);\n      AsyncStorage.default.setItem('user', JSON.stringify(userData));\n    };\n    const register = async (email, password, referralCode) => {\n      const API_URL = _expoVirtualEnv.env.EXPO_PUBLIC_BACKEND_URL;\n      const response = await axios.default.post(`${API_URL}/api/auth/register`, {\n        email,\n        password,\n        referred_by: referralCode || null\n      });\n      const {\n        access_token,\n        user: userData\n      } = response.data;\n\n      // Update state FIRST (synchronous)\n      setToken(access_token);\n      setUser(userData);\n\n      // Then persist to AsyncStorage (fire and forget)\n      AsyncStorage.default.setItem('token', access_token);\n      AsyncStorage.default.setItem('user', JSON.stringify(userData));\n    };\n    const logout = async () => {\n      console.log('[AUTH] Logout initiated');\n      // Update state FIRST (synchronous)\n      setToken(null);\n      setUser(null);\n      console.log('[AUTH] State cleared - token and user set to null');\n\n      // Then clear AsyncStorage (async, fire and forget)\n      AsyncStorage.default.removeItem('token');\n      AsyncStorage.default.removeItem('user');\n      console.log('[AUTH] AsyncStorage cleared');\n    };\n    return /*#__PURE__*/(0, _reactJsxDevRuntime.jsxDEV)(AuthContext.Provider, {\n      value: {\n        user,\n        token,\n        loading,\n        login,\n        register,\n        logout,\n        isAuthenticated: !!token\n      },\n      children: children\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 98,\n      columnNumber: 5\n    }, this);\n  };\n  _s(AuthProvider, \"uAkFQMmIUxfxJcQTEb8tCM/KFt4=\");\n  _c = AuthProvider;\n  const useAuth = () => {\n    _s2();\n    const context = (0, _react.useContext)(AuthContext);\n    if (context === undefined) {\n      throw new Error('useAuth must be used within an AuthProvider');\n    }\n    return context;\n  };\n  _s2(useAuth, \"b9L3QQ+jgeyIrH0NfHrJ8nn7VMU=\");\n  var _c;\n  $RefreshReg$(_c, \"AuthProvider\");\n});","lineCount":140,"map":[[15,2,22,0,"Object"],[15,8,22,0],[15,9,22,0,"defineProperty"],[15,23,22,0],[15,24,22,0,"exports"],[15,31,22,0],[16,4,22,0,"enumerable"],[16,14,22,0],[17,4,22,0,"get"],[17,7,22,0],[17,18,22,0,"get"],[17,19,22,0],[18,6,22,0],[18,13,22,0,"AuthProvider"],[18,25,22,0],[19,4,22,0],[20,2,22,0],[21,2,114,0,"Object"],[21,8,114,0],[21,9,114,0,"defineProperty"],[21,23,114,0],[21,24,114,0,"exports"],[21,31,114,0],[22,4,114,0,"enumerable"],[22,14,114,0],[23,4,114,0,"get"],[23,7,114,0],[23,18,114,0,"get"],[23,19,114,0],[24,6,114,0],[24,13,114,0,"useAuth"],[24,20,114,0],[25,4,114,0],[26,2,114,0],[27,2,120,2],[27,6,120,2,"_expoVirtualEnv"],[27,21,120,2],[27,24,120,2,"require"],[27,31,120,2],[27,32,120,2,"_dependencyMap"],[27,46,120,2],[28,2,1,0],[28,6,1,0,"_react"],[28,12,1,0],[28,15,1,0,"require"],[28,22,1,0],[28,23,1,0,"_dependencyMap"],[28,37,1,0],[29,2,2,0],[29,6,2,0,"_reactNativeAsyncStorageAsyncStorage"],[29,42,2,0],[29,45,2,0,"require"],[29,52,2,0],[29,53,2,0,"_dependencyMap"],[29,67,2,0],[30,2,2,0],[30,6,2,0,"AsyncStorage"],[30,18,2,0],[30,21,2,0,"_interopDefault"],[30,36,2,0],[30,37,2,0,"_reactNativeAsyncStorageAsyncStorage"],[30,73,2,0],[31,2,3,0],[31,6,3,0,"_axios"],[31,12,3,0],[31,15,3,0,"require"],[31,22,3,0],[31,23,3,0,"_dependencyMap"],[31,37,3,0],[32,2,3,0],[32,6,3,0,"axios"],[32,11,3,0],[32,14,3,0,"_interopDefault"],[32,29,3,0],[32,30,3,0,"_axios"],[32,36,3,0],[33,2,3,26],[33,6,3,26,"_reactJsxDevRuntime"],[33,25,3,26],[33,28,3,26,"require"],[33,35,3,26],[33,36,3,26,"_dependencyMap"],[33,50,3,26],[34,2,20,0],[34,8,20,6,"AuthContext"],[34,19,20,17],[34,35,20,20],[34,39,20,20,"createContext"],[34,45,20,33],[34,46,20,33,"createContext"],[34,59,20,33],[34,61,20,63,"undefined"],[34,70,20,72],[34,71,20,73],[35,2,22,7],[35,8,22,13,"AuthProvider"],[35,20,22,25],[35,23,22,28,"AuthProvider"],[35,24,22,29],[36,4,22,31,"children"],[37,2,22,65],[37,3,22,66],[37,8,22,71],[38,4,22,71,"_s"],[38,6,22,71],[39,4,23,2],[39,10,23,8],[39,11,23,9,"user"],[39,15,23,13],[39,17,23,15,"setUser"],[39,24,23,22],[39,25,23,23],[39,28,23,26],[39,32,23,26,"useState"],[39,38,23,34],[39,39,23,34,"useState"],[39,47,23,34],[39,49,23,48],[39,53,23,52],[39,54,23,53],[40,4,24,2],[40,10,24,8],[40,11,24,9,"token"],[40,16,24,14],[40,18,24,16,"setToken"],[40,26,24,24],[40,27,24,25],[40,30,24,28],[40,34,24,28,"useState"],[40,40,24,36],[40,41,24,36,"useState"],[40,49,24,36],[40,51,24,52],[40,55,24,56],[40,56,24,57],[41,4,25,2],[41,10,25,8],[41,11,25,9,"loading"],[41,18,25,16],[41,20,25,18,"setLoading"],[41,30,25,28],[41,31,25,29],[41,34,25,32],[41,38,25,32,"useState"],[41,44,25,40],[41,45,25,40,"useState"],[41,53,25,40],[41,55,25,41],[41,59,25,45],[41,60,25,46],[42,4,27,2],[42,8,27,2,"useEffect"],[42,14,27,11],[42,15,27,11,"useEffect"],[42,24,27,11],[42,26,27,12],[42,32,27,18],[43,6,28,4,"loadStoredAuth"],[43,20,28,18],[43,21,28,19],[43,22,28,20],[44,4,29,2],[44,5,29,3],[44,7,29,5],[44,9,29,7],[44,10,29,8],[45,4,31,2],[45,10,31,8,"loadStoredAuth"],[45,24,31,22],[45,27,31,25],[45,33,31,25,"loadStoredAuth"],[45,34,31,25],[45,39,31,37],[46,6,32,4],[46,10,32,8],[47,8,33,6],[47,14,33,12,"storedToken"],[47,25,33,23],[47,28,33,26],[47,34,33,32,"AsyncStorage"],[47,46,33,44],[47,47,33,44,"default"],[47,54,33,44],[47,55,33,45,"getItem"],[47,62,33,52],[47,63,33,53],[47,70,33,60],[47,71,33,61],[48,8,34,6],[48,14,34,12,"storedUser"],[48,24,34,22],[48,27,34,25],[48,33,34,31,"AsyncStorage"],[48,45,34,43],[48,46,34,43,"default"],[48,53,34,43],[48,54,34,44,"getItem"],[48,61,34,51],[48,62,34,52],[48,68,34,58],[48,69,34,59],[49,8,36,6],[49,12,36,10,"storedToken"],[49,23,36,21],[49,27,36,25,"storedUser"],[49,37,36,35],[49,39,36,37],[50,10,37,8,"setToken"],[50,18,37,16],[50,19,37,17,"storedToken"],[50,30,37,28],[50,31,37,29],[51,10,38,8,"setUser"],[51,17,38,15],[51,18,38,16,"JSON"],[51,22,38,20],[51,23,38,21,"parse"],[51,28,38,26],[51,29,38,27,"storedUser"],[51,39,38,37],[51,40,38,38],[51,41,38,39],[52,8,39,6],[53,6,40,4],[53,7,40,5],[53,8,40,6],[53,15,40,13,"error"],[53,20,40,18],[53,22,40,20],[54,8,41,6,"console"],[54,15,41,13],[54,16,41,14,"error"],[54,21,41,19],[54,22,41,20],[54,43,41,41],[54,45,41,43,"error"],[54,50,41,48],[54,51,41,49],[55,6,42,4],[55,7,42,5],[55,16,42,14],[56,8,43,6,"setLoading"],[56,18,43,16],[56,19,43,17],[56,24,43,22],[56,25,43,23],[57,6,44,4],[58,4,45,2],[58,5,45,3],[59,4,47,2],[59,10,47,8,"login"],[59,15,47,13],[59,18,47,16],[59,24,47,16,"login"],[59,25,47,23,"email"],[59,30,47,36],[59,32,47,38,"password"],[59,40,47,54],[59,45,47,59],[60,6,48,4],[60,12,48,10,"API_URL"],[60,19,48,17],[60,22,48,17,"_expoVirtualEnv"],[60,37,48,17],[60,38,48,17,"env"],[60,41,48,17],[60,42,48,17,"EXPO_PUBLIC_BACKEND_URL"],[60,65,48,55],[61,6,49,4],[61,12,49,10,"response"],[61,20,49,18],[61,23,49,21],[61,29,49,27,"axios"],[61,34,49,32],[61,35,49,32,"default"],[61,42,49,32],[61,43,49,33,"post"],[61,47,49,37],[61,48,49,38],[61,51,49,41,"API_URL"],[61,58,49,48],[61,75,49,65],[61,77,49,67],[62,8,50,6,"email"],[62,13,50,11],[63,8,51,6,"password"],[64,6,52,4],[64,7,52,5],[64,8,52,6],[65,6,54,4],[65,12,54,10],[66,8,54,12,"access_token"],[66,20,54,24],[67,8,54,26,"user"],[67,12,54,30],[67,14,54,32,"userData"],[68,6,54,41],[68,7,54,42],[68,10,54,45,"response"],[68,18,54,53],[68,19,54,54,"data"],[68,23,54,58],[70,6,56,4],[71,6,57,4,"setToken"],[71,14,57,12],[71,15,57,13,"access_token"],[71,27,57,25],[71,28,57,26],[72,6,58,4,"setUser"],[72,13,58,11],[72,14,58,12,"userData"],[72,22,58,20],[72,23,58,21],[74,6,60,4],[75,6,61,4,"AsyncStorage"],[75,18,61,16],[75,19,61,16,"default"],[75,26,61,16],[75,27,61,17,"setItem"],[75,34,61,24],[75,35,61,25],[75,42,61,32],[75,44,61,34,"access_token"],[75,56,61,46],[75,57,61,47],[76,6,62,4,"AsyncStorage"],[76,18,62,16],[76,19,62,16,"default"],[76,26,62,16],[76,27,62,17,"setItem"],[76,34,62,24],[76,35,62,25],[76,41,62,31],[76,43,62,33,"JSON"],[76,47,62,37],[76,48,62,38,"stringify"],[76,57,62,47],[76,58,62,48,"userData"],[76,66,62,56],[76,67,62,57],[76,68,62,58],[77,4,63,2],[77,5,63,3],[78,4,65,2],[78,10,65,8,"register"],[78,18,65,16],[78,21,65,19],[78,27,65,19,"register"],[78,28,65,26,"email"],[78,33,65,39],[78,35,65,41,"password"],[78,43,65,57],[78,45,65,59,"referralCode"],[78,57,65,80],[78,62,65,85],[79,6,66,4],[79,12,66,10,"API_URL"],[79,19,66,17],[79,22,66,17,"_expoVirtualEnv"],[79,37,66,17],[79,38,66,17,"env"],[79,41,66,17],[79,42,66,17,"EXPO_PUBLIC_BACKEND_URL"],[79,65,66,55],[80,6,67,4],[80,12,67,10,"response"],[80,20,67,18],[80,23,67,21],[80,29,67,27,"axios"],[80,34,67,32],[80,35,67,32,"default"],[80,42,67,32],[80,43,67,33,"post"],[80,47,67,37],[80,48,67,38],[80,51,67,41,"API_URL"],[80,58,67,48],[80,78,67,68],[80,80,67,70],[81,8,68,6,"email"],[81,13,68,11],[82,8,69,6,"password"],[82,16,69,14],[83,8,70,6,"referred_by"],[83,19,70,17],[83,21,70,19,"referralCode"],[83,33,70,31],[83,37,70,35],[84,6,71,4],[84,7,71,5],[84,8,71,6],[85,6,73,4],[85,12,73,10],[86,8,73,12,"access_token"],[86,20,73,24],[87,8,73,26,"user"],[87,12,73,30],[87,14,73,32,"userData"],[88,6,73,41],[88,7,73,42],[88,10,73,45,"response"],[88,18,73,53],[88,19,73,54,"data"],[88,23,73,58],[90,6,75,4],[91,6,76,4,"setToken"],[91,14,76,12],[91,15,76,13,"access_token"],[91,27,76,25],[91,28,76,26],[92,6,77,4,"setUser"],[92,13,77,11],[92,14,77,12,"userData"],[92,22,77,20],[92,23,77,21],[94,6,79,4],[95,6,80,4,"AsyncStorage"],[95,18,80,16],[95,19,80,16,"default"],[95,26,80,16],[95,27,80,17,"setItem"],[95,34,80,24],[95,35,80,25],[95,42,80,32],[95,44,80,34,"access_token"],[95,56,80,46],[95,57,80,47],[96,6,81,4,"AsyncStorage"],[96,18,81,16],[96,19,81,16,"default"],[96,26,81,16],[96,27,81,17,"setItem"],[96,34,81,24],[96,35,81,25],[96,41,81,31],[96,43,81,33,"JSON"],[96,47,81,37],[96,48,81,38,"stringify"],[96,57,81,47],[96,58,81,48,"userData"],[96,66,81,56],[96,67,81,57],[96,68,81,58],[97,4,82,2],[97,5,82,3],[98,4,84,2],[98,10,84,8,"logout"],[98,16,84,14],[98,19,84,17],[98,25,84,17,"logout"],[98,26,84,17],[98,31,84,29],[99,6,85,4,"console"],[99,13,85,11],[99,14,85,12,"log"],[99,17,85,15],[99,18,85,16],[99,43,85,41],[99,44,85,42],[100,6,86,4],[101,6,87,4,"setToken"],[101,14,87,12],[101,15,87,13],[101,19,87,17],[101,20,87,18],[102,6,88,4,"setUser"],[102,13,88,11],[102,14,88,12],[102,18,88,16],[102,19,88,17],[103,6,89,4,"console"],[103,13,89,11],[103,14,89,12,"log"],[103,17,89,15],[103,18,89,16],[103,69,89,67],[103,70,89,68],[105,6,91,4],[106,6,92,4,"AsyncStorage"],[106,18,92,16],[106,19,92,16,"default"],[106,26,92,16],[106,27,92,17,"removeItem"],[106,37,92,27],[106,38,92,28],[106,45,92,35],[106,46,92,36],[107,6,93,4,"AsyncStorage"],[107,18,93,16],[107,19,93,16,"default"],[107,26,93,16],[107,27,93,17,"removeItem"],[107,37,93,27],[107,38,93,28],[107,44,93,34],[107,45,93,35],[108,6,94,4,"console"],[108,13,94,11],[108,14,94,12,"log"],[108,17,94,15],[108,18,94,16],[108,47,94,45],[108,48,94,46],[109,4,95,2],[109,5,95,3],[110,4,97,2],[110,24,98,4],[110,28,98,4,"_reactJsxDevRuntime"],[110,47,98,4],[110,48,98,4,"jsxDEV"],[110,54,98,4],[110,56,98,5,"AuthContext"],[110,67,98,16],[110,68,98,17,"Provider"],[110,76,98,25],[111,6,99,6,"value"],[111,11,99,11],[111,13,99,13],[112,8,100,8,"user"],[112,12,100,12],[113,8,101,8,"token"],[113,13,101,13],[114,8,102,8,"loading"],[114,15,102,15],[115,8,103,8,"login"],[115,13,103,13],[116,8,104,8,"register"],[116,16,104,16],[117,8,105,8,"logout"],[117,14,105,14],[118,8,106,8,"isAuthenticated"],[118,23,106,23],[118,25,106,25],[118,26,106,26],[118,27,106,27,"token"],[119,6,107,6],[119,7,107,8],[120,6,107,8,"children"],[120,14,107,8],[120,16,109,7,"children"],[121,4,109,15],[122,6,109,15,"fileName"],[122,14,109,15],[122,16,109,15,"_jsxFileName"],[122,28,109,15],[123,6,109,15,"lineNumber"],[123,16,109,15],[124,6,109,15,"columnNumber"],[124,18,109,15],[125,4,109,15],[125,11,110,26],[125,12,110,27],[126,2,112,0],[126,3,112,1],[127,2,112,2,"_s"],[127,4,112,2],[127,5,22,13,"AuthProvider"],[127,17,22,25],[128,2,22,25,"_c"],[128,4,22,25],[128,7,22,13,"AuthProvider"],[128,19,22,25],[129,2,114,7],[129,8,114,13,"useAuth"],[129,15,114,20],[129,18,114,23,"useAuth"],[129,19,114,23],[129,24,114,29],[130,4,114,29,"_s2"],[130,7,114,29],[131,4,115,2],[131,10,115,8,"context"],[131,17,115,15],[131,20,115,18],[131,24,115,18,"useContext"],[131,30,115,28],[131,31,115,28,"useContext"],[131,41,115,28],[131,43,115,29,"AuthContext"],[131,54,115,40],[131,55,115,41],[132,4,116,2],[132,8,116,6,"context"],[132,15,116,13],[132,20,116,18,"undefined"],[132,29,116,27],[132,31,116,29],[133,6,117,4],[133,12,117,10],[133,16,117,14,"Error"],[133,21,117,19],[133,22,117,20],[133,67,117,65],[133,68,117,66],[134,4,118,2],[135,4,119,2],[135,11,119,9,"context"],[135,18,119,16],[136,2,120,0],[136,3,120,1],[137,2,120,2,"_s2"],[137,5,120,2],[137,6,114,13,"useAuth"],[137,13,114,20],[138,2,114,20],[138,6,114,20,"_c"],[138,8,114,20],[139,2,114,20,"$RefreshReg$"],[139,14,114,20],[139,15,114,20,"_c"],[139,17,114,20],[140,0,114,20],[140,3]],"functionMap":{"names":["<global>","AuthProvider","useEffect$argument_0","loadStoredAuth","login","register","logout","useAuth"],"mappings":"AAA;4BCqB;YCK;GDE;yBEE;GFc;gBGE;GHgB;mBIE;GJiB;iBKE;GLW;CDiB;uBOE;CPM"},"hasCjsExports":false},"type":"js/module"}]}