{"dependencies":[{"name":"react","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":89,"index":89}}],"key":"RtGiGa+/H7VrI7GDQDLhO1UbpU8=","exportNames":["*"],"imports":1}},{"name":"@react-native-async-storage/async-storage","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":2,"column":0,"index":90},"end":{"line":2,"column":69,"index":159}}],"key":"0kSRlooyBOaYM9tlTtK91nq+uds=","exportNames":["*"],"imports":1}},{"name":"axios","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":3,"column":0,"index":160},"end":{"line":3,"column":26,"index":186}}],"key":"e45rENb5cSu0Yeh6oC1uWb7lEp4=","exportNames":["*"],"imports":1}},{"name":"react/jsx-dev-runtime","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"L9D70Z4hi4aGuui1ysja/oQ5ytI=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  var _jsxFileName = \"/app/frontend/contexts/AuthContext.tsx\";\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  function _interopDefault(e) {\n    return e && e.__esModule ? e : {\n      default: e\n    };\n  }\n  Object.defineProperty(exports, \"AuthProvider\", {\n    enumerable: true,\n    get: function () {\n      return AuthProvider;\n    }\n  });\n  Object.defineProperty(exports, \"useAuth\", {\n    enumerable: true,\n    get: function () {\n      return useAuth;\n    }\n  });\n  var _react = require(_dependencyMap[0], \"react\");\n  var _reactNativeAsyncStorageAsyncStorage = require(_dependencyMap[1], \"@react-native-async-storage/async-storage\");\n  var AsyncStorage = _interopDefault(_reactNativeAsyncStorageAsyncStorage);\n  var _axios = require(_dependencyMap[2], \"axios\");\n  var axios = _interopDefault(_axios);\n  var _reactJsxDevRuntime = require(_dependencyMap[3], \"react/jsx-dev-runtime\");\n  const AuthContext = /*#__PURE__*/(0, _react.createContext)(undefined);\n  const AuthProvider = ({\n    children\n  }) => {\n    const [user, setUser] = (0, _react.useState)(null);\n    const [token, setToken] = (0, _react.useState)(null);\n    const [loading, setLoading] = (0, _react.useState)(true);\n    (0, _react.useEffect)(() => {\n      loadStoredAuth();\n    }, []);\n    const loadStoredAuth = async () => {\n      try {\n        const storedToken = await AsyncStorage.default.getItem('token');\n        const storedUser = await AsyncStorage.default.getItem('user');\n        if (storedToken && storedUser) {\n          setToken(storedToken);\n          setUser(JSON.parse(storedUser));\n        }\n      } catch (error) {\n        console.error('Error loading auth:', error);\n      } finally {\n        setLoading(false);\n      }\n    };\n    const login = async (email, password) => {\n      const API_URL = process.env.EXPO_PUBLIC_BACKEND_URL;\n      const response = await axios.default.post(`${API_URL}/api/auth/login`, {\n        email,\n        password\n      });\n      const {\n        access_token,\n        user: userData\n      } = response.data;\n\n      // Update state FIRST (synchronous)\n      setToken(access_token);\n      setUser(userData);\n\n      // Then persist to AsyncStorage (fire and forget)\n      AsyncStorage.default.setItem('token', access_token);\n      AsyncStorage.default.setItem('user', JSON.stringify(userData));\n    };\n    const register = async (email, password, referralCode) => {\n      const API_URL = process.env.EXPO_PUBLIC_BACKEND_URL;\n      const response = await axios.default.post(`${API_URL}/api/auth/register`, {\n        email,\n        password,\n        referred_by: referralCode || null\n      });\n      const {\n        access_token,\n        user: userData\n      } = response.data;\n\n      // Update state FIRST (synchronous)\n      setToken(access_token);\n      setUser(userData);\n\n      // Then persist to AsyncStorage (fire and forget)\n      AsyncStorage.default.setItem('token', access_token);\n      AsyncStorage.default.setItem('user', JSON.stringify(userData));\n    };\n    const logout = async () => {\n      console.log('[AUTH] Logout initiated');\n      // Update state FIRST (synchronous)\n      setToken(null);\n      setUser(null);\n      console.log('[AUTH] State cleared - token and user set to null');\n\n      // Then clear AsyncStorage (async, fire and forget)\n      AsyncStorage.default.removeItem('token');\n      AsyncStorage.default.removeItem('user');\n      console.log('[AUTH] AsyncStorage cleared');\n    };\n    return /*#__PURE__*/(0, _reactJsxDevRuntime.jsxDEV)(AuthContext.Provider, {\n      value: {\n        user,\n        token,\n        loading,\n        login,\n        register,\n        logout,\n        isAuthenticated: !!token\n      },\n      children: children\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 98,\n      columnNumber: 5\n    }, this);\n  };\n  const useAuth = () => {\n    const context = (0, _react.useContext)(AuthContext);\n    if (context === undefined) {\n      throw new Error('useAuth must be used within an AuthProvider');\n    }\n    return context;\n  };\n});","lineCount":130,"map":[[13,2,22,0,"Object"],[13,8,22,0],[13,9,22,0,"defineProperty"],[13,23,22,0],[13,24,22,0,"exports"],[13,31,22,0],[14,4,22,0,"enumerable"],[14,14,22,0],[15,4,22,0,"get"],[15,7,22,0],[15,18,22,0,"get"],[15,19,22,0],[16,6,22,0],[16,13,22,0,"AuthProvider"],[16,25,22,0],[17,4,22,0],[18,2,22,0],[19,2,114,0,"Object"],[19,8,114,0],[19,9,114,0,"defineProperty"],[19,23,114,0],[19,24,114,0,"exports"],[19,31,114,0],[20,4,114,0,"enumerable"],[20,14,114,0],[21,4,114,0,"get"],[21,7,114,0],[21,18,114,0,"get"],[21,19,114,0],[22,6,114,0],[22,13,114,0,"useAuth"],[22,20,114,0],[23,4,114,0],[24,2,114,0],[25,2,1,0],[25,6,1,0,"_react"],[25,12,1,0],[25,15,1,0,"require"],[25,22,1,0],[25,23,1,0,"_dependencyMap"],[25,37,1,0],[26,2,2,0],[26,6,2,0,"_reactNativeAsyncStorageAsyncStorage"],[26,42,2,0],[26,45,2,0,"require"],[26,52,2,0],[26,53,2,0,"_dependencyMap"],[26,67,2,0],[27,2,2,0],[27,6,2,0,"AsyncStorage"],[27,18,2,0],[27,21,2,0,"_interopDefault"],[27,36,2,0],[27,37,2,0,"_reactNativeAsyncStorageAsyncStorage"],[27,73,2,0],[28,2,3,0],[28,6,3,0,"_axios"],[28,12,3,0],[28,15,3,0,"require"],[28,22,3,0],[28,23,3,0,"_dependencyMap"],[28,37,3,0],[29,2,3,0],[29,6,3,0,"axios"],[29,11,3,0],[29,14,3,0,"_interopDefault"],[29,29,3,0],[29,30,3,0,"_axios"],[29,36,3,0],[30,2,3,26],[30,6,3,26,"_reactJsxDevRuntime"],[30,25,3,26],[30,28,3,26,"require"],[30,35,3,26],[30,36,3,26,"_dependencyMap"],[30,50,3,26],[31,2,20,0],[31,8,20,6,"AuthContext"],[31,19,20,17],[31,35,20,20],[31,39,20,20,"createContext"],[31,45,20,33],[31,46,20,33,"createContext"],[31,59,20,33],[31,61,20,63,"undefined"],[31,70,20,72],[31,71,20,73],[32,2,22,7],[32,8,22,13,"AuthProvider"],[32,20,22,25],[32,23,22,28,"AuthProvider"],[32,24,22,29],[33,4,22,31,"children"],[34,2,22,65],[34,3,22,66],[34,8,22,71],[35,4,23,2],[35,10,23,8],[35,11,23,9,"user"],[35,15,23,13],[35,17,23,15,"setUser"],[35,24,23,22],[35,25,23,23],[35,28,23,26],[35,32,23,26,"useState"],[35,38,23,34],[35,39,23,34,"useState"],[35,47,23,34],[35,49,23,48],[35,53,23,52],[35,54,23,53],[36,4,24,2],[36,10,24,8],[36,11,24,9,"token"],[36,16,24,14],[36,18,24,16,"setToken"],[36,26,24,24],[36,27,24,25],[36,30,24,28],[36,34,24,28,"useState"],[36,40,24,36],[36,41,24,36,"useState"],[36,49,24,36],[36,51,24,52],[36,55,24,56],[36,56,24,57],[37,4,25,2],[37,10,25,8],[37,11,25,9,"loading"],[37,18,25,16],[37,20,25,18,"setLoading"],[37,30,25,28],[37,31,25,29],[37,34,25,32],[37,38,25,32,"useState"],[37,44,25,40],[37,45,25,40,"useState"],[37,53,25,40],[37,55,25,41],[37,59,25,45],[37,60,25,46],[38,4,27,2],[38,8,27,2,"useEffect"],[38,14,27,11],[38,15,27,11,"useEffect"],[38,24,27,11],[38,26,27,12],[38,32,27,18],[39,6,28,4,"loadStoredAuth"],[39,20,28,18],[39,21,28,19],[39,22,28,20],[40,4,29,2],[40,5,29,3],[40,7,29,5],[40,9,29,7],[40,10,29,8],[41,4,31,2],[41,10,31,8,"loadStoredAuth"],[41,24,31,22],[41,27,31,25],[41,33,31,25,"loadStoredAuth"],[41,34,31,25],[41,39,31,37],[42,6,32,4],[42,10,32,8],[43,8,33,6],[43,14,33,12,"storedToken"],[43,25,33,23],[43,28,33,26],[43,34,33,32,"AsyncStorage"],[43,46,33,44],[43,47,33,44,"default"],[43,54,33,44],[43,55,33,45,"getItem"],[43,62,33,52],[43,63,33,53],[43,70,33,60],[43,71,33,61],[44,8,34,6],[44,14,34,12,"storedUser"],[44,24,34,22],[44,27,34,25],[44,33,34,31,"AsyncStorage"],[44,45,34,43],[44,46,34,43,"default"],[44,53,34,43],[44,54,34,44,"getItem"],[44,61,34,51],[44,62,34,52],[44,68,34,58],[44,69,34,59],[45,8,36,6],[45,12,36,10,"storedToken"],[45,23,36,21],[45,27,36,25,"storedUser"],[45,37,36,35],[45,39,36,37],[46,10,37,8,"setToken"],[46,18,37,16],[46,19,37,17,"storedToken"],[46,30,37,28],[46,31,37,29],[47,10,38,8,"setUser"],[47,17,38,15],[47,18,38,16,"JSON"],[47,22,38,20],[47,23,38,21,"parse"],[47,28,38,26],[47,29,38,27,"storedUser"],[47,39,38,37],[47,40,38,38],[47,41,38,39],[48,8,39,6],[49,6,40,4],[49,7,40,5],[49,8,40,6],[49,15,40,13,"error"],[49,20,40,18],[49,22,40,20],[50,8,41,6,"console"],[50,15,41,13],[50,16,41,14,"error"],[50,21,41,19],[50,22,41,20],[50,43,41,41],[50,45,41,43,"error"],[50,50,41,48],[50,51,41,49],[51,6,42,4],[51,7,42,5],[51,16,42,14],[52,8,43,6,"setLoading"],[52,18,43,16],[52,19,43,17],[52,24,43,22],[52,25,43,23],[53,6,44,4],[54,4,45,2],[54,5,45,3],[55,4,47,2],[55,10,47,8,"login"],[55,15,47,13],[55,18,47,16],[55,24,47,16,"login"],[55,25,47,23,"email"],[55,30,47,36],[55,32,47,38,"password"],[55,40,47,54],[55,45,47,59],[56,6,48,4],[56,12,48,10,"API_URL"],[56,19,48,17],[56,22,48,20,"process"],[56,29,48,27],[56,30,48,28,"env"],[56,33,48,31],[56,34,48,32,"EXPO_PUBLIC_BACKEND_URL"],[56,57,48,55],[57,6,49,4],[57,12,49,10,"response"],[57,20,49,18],[57,23,49,21],[57,29,49,27,"axios"],[57,34,49,32],[57,35,49,32,"default"],[57,42,49,32],[57,43,49,33,"post"],[57,47,49,37],[57,48,49,38],[57,51,49,41,"API_URL"],[57,58,49,48],[57,75,49,65],[57,77,49,67],[58,8,50,6,"email"],[58,13,50,11],[59,8,51,6,"password"],[60,6,52,4],[60,7,52,5],[60,8,52,6],[61,6,54,4],[61,12,54,10],[62,8,54,12,"access_token"],[62,20,54,24],[63,8,54,26,"user"],[63,12,54,30],[63,14,54,32,"userData"],[64,6,54,41],[64,7,54,42],[64,10,54,45,"response"],[64,18,54,53],[64,19,54,54,"data"],[64,23,54,58],[66,6,56,4],[67,6,57,4,"setToken"],[67,14,57,12],[67,15,57,13,"access_token"],[67,27,57,25],[67,28,57,26],[68,6,58,4,"setUser"],[68,13,58,11],[68,14,58,12,"userData"],[68,22,58,20],[68,23,58,21],[70,6,60,4],[71,6,61,4,"AsyncStorage"],[71,18,61,16],[71,19,61,16,"default"],[71,26,61,16],[71,27,61,17,"setItem"],[71,34,61,24],[71,35,61,25],[71,42,61,32],[71,44,61,34,"access_token"],[71,56,61,46],[71,57,61,47],[72,6,62,4,"AsyncStorage"],[72,18,62,16],[72,19,62,16,"default"],[72,26,62,16],[72,27,62,17,"setItem"],[72,34,62,24],[72,35,62,25],[72,41,62,31],[72,43,62,33,"JSON"],[72,47,62,37],[72,48,62,38,"stringify"],[72,57,62,47],[72,58,62,48,"userData"],[72,66,62,56],[72,67,62,57],[72,68,62,58],[73,4,63,2],[73,5,63,3],[74,4,65,2],[74,10,65,8,"register"],[74,18,65,16],[74,21,65,19],[74,27,65,19,"register"],[74,28,65,26,"email"],[74,33,65,39],[74,35,65,41,"password"],[74,43,65,57],[74,45,65,59,"referralCode"],[74,57,65,80],[74,62,65,85],[75,6,66,4],[75,12,66,10,"API_URL"],[75,19,66,17],[75,22,66,20,"process"],[75,29,66,27],[75,30,66,28,"env"],[75,33,66,31],[75,34,66,32,"EXPO_PUBLIC_BACKEND_URL"],[75,57,66,55],[76,6,67,4],[76,12,67,10,"response"],[76,20,67,18],[76,23,67,21],[76,29,67,27,"axios"],[76,34,67,32],[76,35,67,32,"default"],[76,42,67,32],[76,43,67,33,"post"],[76,47,67,37],[76,48,67,38],[76,51,67,41,"API_URL"],[76,58,67,48],[76,78,67,68],[76,80,67,70],[77,8,68,6,"email"],[77,13,68,11],[78,8,69,6,"password"],[78,16,69,14],[79,8,70,6,"referred_by"],[79,19,70,17],[79,21,70,19,"referralCode"],[79,33,70,31],[79,37,70,35],[80,6,71,4],[80,7,71,5],[80,8,71,6],[81,6,73,4],[81,12,73,10],[82,8,73,12,"access_token"],[82,20,73,24],[83,8,73,26,"user"],[83,12,73,30],[83,14,73,32,"userData"],[84,6,73,41],[84,7,73,42],[84,10,73,45,"response"],[84,18,73,53],[84,19,73,54,"data"],[84,23,73,58],[86,6,75,4],[87,6,76,4,"setToken"],[87,14,76,12],[87,15,76,13,"access_token"],[87,27,76,25],[87,28,76,26],[88,6,77,4,"setUser"],[88,13,77,11],[88,14,77,12,"userData"],[88,22,77,20],[88,23,77,21],[90,6,79,4],[91,6,80,4,"AsyncStorage"],[91,18,80,16],[91,19,80,16,"default"],[91,26,80,16],[91,27,80,17,"setItem"],[91,34,80,24],[91,35,80,25],[91,42,80,32],[91,44,80,34,"access_token"],[91,56,80,46],[91,57,80,47],[92,6,81,4,"AsyncStorage"],[92,18,81,16],[92,19,81,16,"default"],[92,26,81,16],[92,27,81,17,"setItem"],[92,34,81,24],[92,35,81,25],[92,41,81,31],[92,43,81,33,"JSON"],[92,47,81,37],[92,48,81,38,"stringify"],[92,57,81,47],[92,58,81,48,"userData"],[92,66,81,56],[92,67,81,57],[92,68,81,58],[93,4,82,2],[93,5,82,3],[94,4,84,2],[94,10,84,8,"logout"],[94,16,84,14],[94,19,84,17],[94,25,84,17,"logout"],[94,26,84,17],[94,31,84,29],[95,6,85,4,"console"],[95,13,85,11],[95,14,85,12,"log"],[95,17,85,15],[95,18,85,16],[95,43,85,41],[95,44,85,42],[96,6,86,4],[97,6,87,4,"setToken"],[97,14,87,12],[97,15,87,13],[97,19,87,17],[97,20,87,18],[98,6,88,4,"setUser"],[98,13,88,11],[98,14,88,12],[98,18,88,16],[98,19,88,17],[99,6,89,4,"console"],[99,13,89,11],[99,14,89,12,"log"],[99,17,89,15],[99,18,89,16],[99,69,89,67],[99,70,89,68],[101,6,91,4],[102,6,92,4,"AsyncStorage"],[102,18,92,16],[102,19,92,16,"default"],[102,26,92,16],[102,27,92,17,"removeItem"],[102,37,92,27],[102,38,92,28],[102,45,92,35],[102,46,92,36],[103,6,93,4,"AsyncStorage"],[103,18,93,16],[103,19,93,16,"default"],[103,26,93,16],[103,27,93,17,"removeItem"],[103,37,93,27],[103,38,93,28],[103,44,93,34],[103,45,93,35],[104,6,94,4,"console"],[104,13,94,11],[104,14,94,12,"log"],[104,17,94,15],[104,18,94,16],[104,47,94,45],[104,48,94,46],[105,4,95,2],[105,5,95,3],[106,4,97,2],[106,24,98,4],[106,28,98,4,"_reactJsxDevRuntime"],[106,47,98,4],[106,48,98,4,"jsxDEV"],[106,54,98,4],[106,56,98,5,"AuthContext"],[106,67,98,16],[106,68,98,17,"Provider"],[106,76,98,25],[107,6,99,6,"value"],[107,11,99,11],[107,13,99,13],[108,8,100,8,"user"],[108,12,100,12],[109,8,101,8,"token"],[109,13,101,13],[110,8,102,8,"loading"],[110,15,102,15],[111,8,103,8,"login"],[111,13,103,13],[112,8,104,8,"register"],[112,16,104,16],[113,8,105,8,"logout"],[113,14,105,14],[114,8,106,8,"isAuthenticated"],[114,23,106,23],[114,25,106,25],[114,26,106,26],[114,27,106,27,"token"],[115,6,107,6],[115,7,107,8],[116,6,107,8,"children"],[116,14,107,8],[116,16,109,7,"children"],[117,4,109,15],[118,6,109,15,"fileName"],[118,14,109,15],[118,16,109,15,"_jsxFileName"],[118,28,109,15],[119,6,109,15,"lineNumber"],[119,16,109,15],[120,6,109,15,"columnNumber"],[120,18,109,15],[121,4,109,15],[121,11,110,26],[121,12,110,27],[122,2,112,0],[122,3,112,1],[123,2,114,7],[123,8,114,13,"useAuth"],[123,15,114,20],[123,18,114,23,"useAuth"],[123,19,114,23],[123,24,114,29],[124,4,115,2],[124,10,115,8,"context"],[124,17,115,15],[124,20,115,18],[124,24,115,18,"useContext"],[124,30,115,28],[124,31,115,28,"useContext"],[124,41,115,28],[124,43,115,29,"AuthContext"],[124,54,115,40],[124,55,115,41],[125,4,116,2],[125,8,116,6,"context"],[125,15,116,13],[125,20,116,18,"undefined"],[125,29,116,27],[125,31,116,29],[126,6,117,4],[126,12,117,10],[126,16,117,14,"Error"],[126,21,117,19],[126,22,117,20],[126,67,117,65],[126,68,117,66],[127,4,118,2],[128,4,119,2],[128,11,119,9,"context"],[128,18,119,16],[129,2,120,0],[129,3,120,1],[130,0,120,2],[130,3]],"functionMap":{"names":["<global>","AuthProvider","useEffect$argument_0","loadStoredAuth","login","register","logout","useAuth"],"mappings":"AAA;4BCqB;YCK;GDE;yBEE;GFc;gBGE;GHgB;mBIE;GJiB;iBKE;GLW;CDiB;uBOE;CPM"},"hasCjsExports":false},"type":"js/module"}]}